<script>
    import {onMount} from "svelte";

    export let data;

    let showedRatings = {};

    const GetRatingsToShow = () => {
        for (let i = 0; i < data.length; i++) {
            if (data[i].rating === 0)
                continue

            showedRatings[data[i].external_type] = {
                id: data[i].id,
                rating: data[i].rating,
                votes: data[i].votes
            }
        }
    }

    onMount(() => {
        if (data !== null) {
            GetRatingsToShow()
        }
    })
</script>

{#if data !== null}
    <div class="space-y-2 font-semibold text-xs">
        {#if showedRatings["kinopoisk"] !== undefined}
            <div class="text-[#ff5500] flex items-center gap-x-1.5 justify-center bg-slate-800 px-4 py-2 rounded-l-lg" title='{ showedRatings["kinopoisk"].votes } голосов'>
                <svg class="w-6 h-6" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M15 8C15 11.866 11.866 15 8 15C4.13403 15 1 11.866 1 8C1 4.13401 4.13403 1 8 1C11.866 1 15 4.13401 15 8ZM5.5 7C6.32843 7 7 6.32843 7 5.5C7 4.67157 6.32843 4 5.5 4C4.67157 4 4 4.67157 4 5.5C4 6.32843 4.67157 7 5.5 7ZM12 5.5C12 6.32843 11.3284 7 10.5 7C9.67157 7 9 6.32843 9 5.5C9 4.67157 9.67157 4 10.5 4C11.3284 4 12 4.67157 12 5.5ZM5.5 12C6.32843 12 7 11.3284 7 10.5C7 9.67157 6.32843 9 5.5 9C4.67157 9 4 9.67157 4 10.5C4 11.3284 4.67157 12 5.5 12ZM12 10.5C12 11.3284 11.3284 12 10.5 12C9.67157 12 9 11.3284 9 10.5C9 9.67157 9.67157 9 10.5 9C11.3284 9 12 9.67157 12 10.5ZM8 9C8.55229 9 9 8.55229 9 8C9 7.44772 8.55229 7 8 7C7.44772 7 7 7.44772 7 8C7 8.55229 7.44772 9 8 9Z"
                          fill="currentColor"></path>
                </svg>
                <span>{ showedRatings["kinopoisk"].rating.toFixed(2) }</span>
            </div>
        {/if}
        {#if showedRatings["imdb"] !== undefined}
            <div class="flex items-center gap-x-1.5 justify-center bg-slate-800 px-4 py-2 rounded-l-lg text-[#f5c518]" title='{ showedRatings["imdb"].votes }  голосов'>
                <svg class="w-6 h-6" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M12.8954 10.9999H12V4.99997L13 4.99997V7.17181C13.1322 7.01896 13.2796 6.90496 13.4418 6.82981C13.6045 6.75465 13.8485 6.71653 14.0391 6.71653C14.2584 6.71653 14.4486 6.75066 14.6098 6.81892C14.771 6.88717 14.8941 6.98266 14.9787 7.10573C15.0633 7.22881 15.1141 7.34898 15.1312 7.46698C15.1482 7.58497 15.1569 7.83621 15.1569 8.22105V9.5357C15.1569 9.91836 15.1312 10.203 15.0796 10.3903C15.028 10.5773 14.9068 10.74 14.7165 10.8772C14.5259 11.0148 14.3001 11.0834 14.0383 11.0834C13.8503 11.0834 13.6074 11.0428 13.4451 10.9611C13.2821 10.8797 13.1336 10.757 12.9985 10.5936C12.9917 10.6209 12.9575 10.7563 12.8954 10.9999ZM13.2476 9.99997C13.3485 9.99997 13.9234 9.95894 13.9539 9.87798C13.9742 9.82389 13.9895 9.78838 14 9.45256V8.29294C14 8.02318 13.9826 8.08238 13.9481 7.99997C13.9132 7.91756 13.3366 7.87653 13.2356 7.87653C13.1369 7.87653 13.073 7.91284 13.0439 7.98436C13.0145 8.05661 13 8.23778 13 8.29294V9.50375C13 9.78403 13.0163 9.80356 13.0497 9.88198C13.0831 9.96076 13.1489 9.99997 13.2476 9.99997Z"
                          fill="currentColor"></path>
                    <path d="M4.5 7.99993L5 4.99997H7V10.9999H6.00545L6 7.12821L5 10.9999H4L3 7.22188L2.99492 10.9999H2V4.99997H4L4.5 7.99993Z"
                          fill="currentColor"></path>
                    <path d="M1 4.99997H0V10.9999H1V4.99997Z" fill="currentColor"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M10.1352 10.9349C10.3323 10.8917 10.4979 10.8155 10.6322 10.7069C10.7662 10.598 10.8602 10.4473 10.914 10.2546C10.9681 10.0621 11 9.67984 11 9.10803V7.30139C11 6.69799 10.9764 6.23799 10.9397 6.0325C10.9027 5.82665 10.8108 5.63967 10.6638 5.47194C10.5164 5.30421 10.3015 5.18368 10.019 5.11034C9.73619 5.037 9.27511 4.99997 8.47311 4.99997H8V10.9999H9.24425C9.70678 10.9854 10.0038 10.964 10.1352 10.9349ZM9.97241 6.23593C9.99056 6.31726 10 6.50169 10 6.78996V9.10803C10 9.53244 9.97241 9.79239 9.91759 9.88823C9.8624 9.98408 9.71572 10.0316 9 10.0316V5.99995C9.18044 5.99995 9.78144 6.01919 9.84679 6.05695C9.91214 6.09507 9.95425 6.15461 9.97241 6.23593Z"
                          fill="currentColor"></path>
                </svg>
                <span>{ showedRatings["imdb"].rating.toFixed(2) }</span>
            </div>
        {/if}
        {#if showedRatings["tmdb"] !== undefined}
            <div class="flex items-center gap-x-1.5 justify-center bg-slate-800 px-4 py-2 rounded-l-lg text-[#90cea1]" title='{ showedRatings["tmdb"].votes }  голосов'>
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 190.24 81.52"><defs><style>.cls-1{fill:url(#linear-gradient);}</style><linearGradient id="linear-gradient" y1="40.76" x2="190.24" y2="40.76" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#90cea1"/><stop offset="0.56" stop-color="#3cbec9"/><stop offset="1" stop-color="#00b3e5"/></linearGradient></defs><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M105.67,36.06h66.9A17.67,17.67,0,0,0,190.24,18.4h0A17.67,17.67,0,0,0,172.57.73h-66.9A17.67,17.67,0,0,0,88,18.4h0A17.67,17.67,0,0,0,105.67,36.06Zm-88,45h76.9A17.67,17.67,0,0,0,112.24,63.4h0A17.67,17.67,0,0,0,94.57,45.73H17.67A17.67,17.67,0,0,0,0,63.4H0A17.67,17.67,0,0,0,17.67,81.06ZM10.41,35.42h7.8V6.92h10.1V0H.31v6.9h10.1Zm28.1,0h7.8V8.25h.1l9,27.15h6l9.3-27.15h.1V35.4h7.8V0H66.76l-8.2,23.1h-.1L50.31,0H38.51ZM152.43,55.67a15.07,15.07,0,0,0-4.52-5.52,18.57,18.57,0,0,0-6.68-3.08,33.54,33.54,0,0,0-8.07-1h-11.7v35.4h12.75a24.58,24.58,0,0,0,7.55-1.15A19.34,19.34,0,0,0,148.11,77a16.27,16.27,0,0,0,4.37-5.5,16.91,16.91,0,0,0,1.63-7.58A18.5,18.5,0,0,0,152.43,55.67ZM145,68.6A8.8,8.8,0,0,1,142.36,72a10.7,10.7,0,0,1-4,1.82,21.57,21.57,0,0,1-5,.55h-4.05v-21h4.6a17,17,0,0,1,4.67.63,11.66,11.66,0,0,1,3.88,1.87A9.14,9.14,0,0,1,145,59a9.87,9.87,0,0,1,1,4.52A11.89,11.89,0,0,1,145,68.6Zm44.63-.13a8,8,0,0,0-1.58-2.62A8.38,8.38,0,0,0,185.63,64a10.31,10.31,0,0,0-3.17-1v-.1a9.22,9.22,0,0,0,4.42-2.82,7.43,7.43,0,0,0,1.68-5,8.42,8.42,0,0,0-1.15-4.65,8.09,8.09,0,0,0-3-2.72,12.56,12.56,0,0,0-4.18-1.3,32.84,32.84,0,0,0-4.62-.33h-13.2v35.4h14.5a22.41,22.41,0,0,0,4.72-.5,13.53,13.53,0,0,0,4.28-1.65,9.42,9.42,0,0,0,3.1-3,8.52,8.52,0,0,0,1.2-4.68A9.39,9.39,0,0,0,189.66,68.47ZM170.21,52.72h5.3a10,10,0,0,1,1.85.18,6.18,6.18,0,0,1,1.7.57,3.39,3.39,0,0,1,1.22,1.13,3.22,3.22,0,0,1,.48,1.82,3.63,3.63,0,0,1-.43,1.8,3.4,3.4,0,0,1-1.12,1.2,4.92,4.92,0,0,1-1.58.65,7.51,7.51,0,0,1-1.77.2h-5.65Zm11.72,20a3.9,3.9,0,0,1-1.22,1.3,4.64,4.64,0,0,1-1.68.7,8.18,8.18,0,0,1-1.82.2h-7v-8h5.9a15.35,15.35,0,0,1,2,.15,8.47,8.47,0,0,1,2.05.55,4,4,0,0,1,1.57,1.18,3.11,3.11,0,0,1,.63,2A3.71,3.71,0,0,1,181.93,72.72Z"/></g></g></svg>
                <span>{ showedRatings["tmdb"].rating.toFixed(2) }</span>
            </div>
        {/if}
    </div>
{/if}